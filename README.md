# Decimal

В данном проекте представлена реализация билиотеки ```s21_decimal.h``` на языке программирования ```С``` (стандарт ```С11```). <br>
Функции полностью покрыты unit-тестами c помощью библиотеки ```Check```<br>
Решение оформлено как статическая библиотека ```s21_decimal.a```<br>
Эта библиотека позволяет работать с типом «decimal», который отсутствует в стандарте языка. Тем не менее, этот тип критически важен, например, для финансовых расчетов, где недопустимы погрешности вычислений, свойственные типам с плавающей точкой.

## Краткая информация

Тип Decimal представляет десятичные числа в диапазоне от положительных ```79,228,162,514,264,337,593,543,950,335``` до отрицательных ```79,228,162,514,264,337,593,543,950,335```. Значение Decimal по умолчанию равно 0.<br>
Decimal число — это значение с плавающей точкой, состоящее из знака, числового значения, где каждая цифра находится в диапазоне от 0 до 9, и коэффициента масштабирования, который указывает положение десятичной точки, разделяющей целые и дробные части числового значения.<br>
Двоичное представление Decimal состоит из 1-разрядного знака, 96-разрядного целого числа и коэффициента масштабирования, используемого для деления 96-разрядного целого числа и указания того, какая его часть является десятичной дробью. Коэффициент масштабирования неявно равен числу 10, возведенному в степень в диапазоне от 0 до 28. Следовательно, двоичное представление Decimal имеет вид ((от -2^96 до 2^96) / 10^(от 0 до 28)), где -(2^96-1) равно минимальному значению, а 2^96-1 равно максимальному значению.<br><br>
Decimal число реализовано в виде четырехэлементного массива 32-разрядных целых чисел со знаком.<br>
bits[0], bits[1], и bits[2] содержат младшие, средние и старшие 32 бита 96-разрядного целого числа соответственно.<br>
bits[3] содержит коэффициент масштабирования и знак и состоит из следующих частей:
<br><br>
- Биты от 0 до 15, младшее слово, не используются и должны быть равны нулю.<br>
- Биты с 16 по 23 должны содержать показатель степени от 0 до 28, который указывает степень 10 для разделения целого числа.<br>
- Биты с 24 по 30 не используются и должны быть равны нулю.<br>
- Бит 31 содержит знак; 0 означает положительный, а 1 означает отрицательный.<br><br>
### Арифметические операторы
<br>

Название оператора|Оператор|Функция
-|-|-
Сложение|+|int s21_add(s21_decimal value_1, s21_decimal value_2, s21_decimal *result)
Вычитание|-|int s21_sub(s21_decimal value_1, s21_decimal value_2, s21_decimal *result)
Умножение|*|int s21_mul(s21_decimal value_1, s21_decimal value_2, s21_decimal *result)
Деление|/|int s21_div(s21_decimal value_1, s21_decimal value_2, s21_decimal *result)

<br>
Функции возвращают код ошибки:
<br>
- 0 — OK;<br>
- 1 — число слишком велико или равно бесконечности;<br>
- 2 — число слишком мало или равно отрицательной бесконечности;<br>
- 3 — деление на 0.
<br><br>

* При получении чисел, не вмещающихся в мантиссу при арифметических операциях, используется банковское округление (например, 79,228,162,514,264,337,593,543,950,335 — 0.6 = 79,228,162,514,264,337,593,543,950,334).<br><br>

### Операторы сравнения 
<br>

Название оператора|Оператор|Функция
-|-|-
Меньше|<|int s21_is_less(s21_decimal, s21_decimal)
Меньше или равно|<=|int s21_is_less_or_equal(s21_decimal, s21_decimal)
Больше|>|int s21_is_greater(s21_decimal, s21_decimal)
Больше или равно|>=|int s21_is_greater_or_equal(s21_decimal, s21_decimal)
Равно|==|int s21_is_equal(s21_decimal, s21_decimal)
Не равно|!=|int s21_is_not_equal(s21_decimal, s21_decimal)

<br>
Возвращаемое значение:<br>
- 0 — FALSE;<br>
- 1 — TRUE.
<br><br>

### Преобразователи
<br>

Преобразователь|Преобразователь
-|-
Из int|int s21_from_int_to_decimal(int src, s21_decimal *dst)
Из float|int s21_from_float_to_decimal(float src, s21_decimal *dst)
В int|int s21_from_decimal_to_int(s21_decimal src, int *dst)
В float|int s21_from_decimal_to_float(s21_decimal src, float *dst)

<br>
<br>
Возвращаемое значение — код ошибки:<br>
- 0 — OK;<br>
- 1 — ошибка конвертации.<br><br>

* Если числа слишком малы (0 < |x| < 1e-28), возвращается ошибка и значение, равное 0.

* Если числа слишком велики (|x| > 79,228,162,514,264,337,593,543,950,335) или равны бесконечности, возвращается ошибка.

* При обработке числа с типом float преобразовываются все содержащиеся в нём значимые десятичные цифры. Если таких цифр больше 7, то значение числа должно округляться к ближайшему, у которого не больше 7 значимых цифр.
* Если в числе типа decimal есть дробная часть, то она отбрасывается (например, 0.9 преобразуется 0).

<br>

### Другие функции

<br>

Описание|Функция
-|-
Округляет указанное Decimal число до ближайшего целого числа в сторону отрицательной бесконечности.|int s21_floor(s21_decimal value, s21_decimal *result)
Округляет Decimal до ближайшего целого числа.|int s21_round(s21_decimal value, s21_decimal *result)
Возвращает целые цифры указанного Decimal числа; любые дробные цифры отбрасываются, включая конечные нули.|int s21_truncate(s21_decimal value, s21_decimal *result)
Возвращает результат умножения указанного Decimal на -1.|int s21_negate(s21_decimal value, s21_decimal *result)

<br>
<br>
Возвращаемое значение — код ошибки:<br>
- 0 — OK;<br>
- 1 — ошибка вычисления.<br><br>

## Установка
```
git clone https://github.com/OctopusInTheKitchenSink/Decimal.git
cd Decimal/src
make s21_decimal.a

# для подключения билиотеки к своему файлу, подключите заголовочный файл s21_decimal.h,
# указав корректные пути
# при компиляции подключайте динамическую библиотеку. Пример:
gcc -Wall -Werror -Wextra -std=c11 Your_file.c s21_decimal.a
./a.out

# если вы захотите проверить корректность работы библиотеки запустите следующую команду
make test

# для вывода отчета о покрытии библиотеки тестами выполните следующую команду
make gcov_report
```
